{{ define "main" -}}
<!-- Resource Filter Cards -->
<section class="resource-cards">
    {{ range .Site.Params.menu }}
        {{ if ne .Name "About" }}
        {{ $slug := .URL | strings.TrimPrefix "/" | strings.TrimSuffix "/" }}
        <button class="resource-card" data-filter="{{ $slug }}" aria-pressed="false">
            <div class="card-icon">
                {{ if eq .Name "Endometriosis" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                {{ else if eq .Name "Adenomyosis" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                {{ else if eq .Name "Diagnosis" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                {{ else if eq .Name "Treatment" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"/><path d="m8.5 8.5 7 7"/></svg>
                {{ else if eq .Name "Healthcare" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M9 16h6"/><path d="M12 13v6"/></svg>
                {{ else if eq .Name "Resources" }}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
                {{ end }}
            </div>
            <h3 class="card-title">{{ .Name }}</h3>
            <p class="card-desc">
                {{ if eq .Name "Endometriosis" }}Symptoms, stages, and support.
                {{ else if eq .Name "Adenomyosis" }}Symptoms and diagnosis.
                {{ else if eq .Name "Diagnosis" }}Methods, tools, and guidance.
                {{ else if eq .Name "Treatment" }}Medical and surgical options.
                {{ else if eq .Name "Healthcare" }}Specialists and navigation.
                {{ else if eq .Name "Resources" }}Organizations and advocacy.
                {{ end }}
            </p>
        </button>
        {{ end }}
    {{ end }}
</section>

<!-- Filtered Content Panels -->
<section class="filtered-content" id="filtered-content">
    {{ range .Site.Params.menu }}
        {{ if ne .Name "About" }}
        {{ $slug := .URL | strings.TrimPrefix "/" | strings.TrimSuffix "/" }}
        {{ with site.GetPage $slug }}
        <article class="filter-panel" data-panel="{{ $slug }}" style="display:none;">
            <h2 class="panel-title">{{ .Title }}</h2>
            {{ .Content }}
        </article>
        {{ end }}
        {{ end }}
    {{ end }}
</section>

<!-- Featured Video -->
<section class="featured-video" id="featured-video">
    <div class="video-embed">
        <iframe src="https://www.youtube.com/embed/1q-uLGvRPw0" title="Endometriosis and Adenomyosis Awareness" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</section>

<!-- Default home content (shown when no filter active) -->
<section class="home-content" id="home-default">
    {{ $frontPageTypes := default (slice "posts") .Site.Params.front_page_content }}
    {{ range (.Paginate (where .Site.RegularPages "Type" "in" $frontPageTypes)).Pages }}
    <article class="post">
        {{ .Content }}
    </article>
    {{- end }}
</section>
{{ partial "pagination.html" . }}
{{- end }}
